<aura:component implements="force:hasRecordId" >
    <aura:attribute name="searchFields" type="object" default="{}" />
    <aura:attribute name="simpleRecord" type="object" />
    <aura:attribute name="disableSearch" type="Boolean" default="false" />
    <aura:attribute name="error" type="string" />

    <force:recordData aura:id="recordLoader" recordId="{!v.recordId}" targetFields="{!v.simpleRecord}" targetError="{!v.error}"
        recordUpdated="{!c.handleRecordUpdated}" layoutType="FULL" />
    
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <aura:registerEvent name="dossierSearchSubmitEvent" type="c:dossierSearchSubmitEvent" />
    <aura:registerEvent name="dossierSelectionConfirmedEvent" type="c:dossierSelectionConfirmedEvent"/>
    
    <lightning:card variant="Narrow" title="Search" >
            <aura:set attribute="title">
                    <div class="logoContainer"><img src="{!$Resource.AppsolutelyLogo}"/></div>
            </aura:set>
        <aura:set attribute="actions">
            <lightning:button class="{!v.disableSearch == false ? 'slds-theme_brand' : 'slds-hide'}" iconPosition="right" variant="brand" type="submit" label="{!$Label.c.Search_Confirm}"
                 onclick="{!c.onSearchSubmit}"/>
            <lightning:button class="{!v.disableSearch == true ? 'slds-theme_brand' : 'slds-hide'}" iconPosition="right" variant="brand" type="submit" label="{!$Label.c.Search_Match_Dossier}"
                iconName="utility:forward" onclick="{!c.onMatchDossier}"/>
        </aura:set>
        <div class="slds-text-color_error">{!v.error}</div>

        <div class="slds-m-vertical_medium slds-text-title">{!$Label.c.Search_Help}</div>

        <!-- TODO: make it multi lingual-->
        <!-- TODO: fix the layout issue -->
        <!-- TODO: add searching in multiple countries -->
        <div class="slds-form slds-form_stacked">
            <lightning:layout class="slds-wrap" multipleRows="true">
                <lightning:layoutItem size="12">
                    <lightning:layout>
                        <lightning:layoutItem size="12">
                            <lightning:input label="Name" value="{!v.searchFields.name}" type="text" variant="standard"/>
                        </lightning:layoutItem>
                    </lightning:layout>
                    <lightning:layout class="slds-wrap" multipleRows="true">
                        <lightning:layoutItem flexibility="grow">
                            <lightning:input class="slds-p-around_large slds-align_absolute-center" label="{!$Label.c.Search_Domain}" value="{!v.searchFields.domain}" type="text" variant="standard"/>
                            <!-- TODO: decide if we keep the dossier number or make it really clean (only use the DutchBusinessSearchV3-->
     <!--                       <lightning:input label="{!$Label.c.Search_Dossier_Number}" value="{!v.searchFields.dossier_number}" type="text" variant="standard"/> -->
                        </lightning:layoutItem>
                    </lightning:layout>
                    <lightning:layout>
                        <lightning:layoutItem size="6">
                            <lightning:input label="{!$Label.c.Search_Street}" value="{!v.searchFields.street}" type="text" variant="standard"/>
                        </lightning:layoutItem>
                        <lightning:layoutItem size="3">
                            <lightning:input label="House Nr" value="{!v.searchFields.house_number}" type="text" variant="standard"/>
                        </lightning:layoutItem>
                        <lightning:layoutItem size="3">
                            <lightning:input label="Addition" value="{!v.searchFields.house_number_addition}" type="text" variant="standard"/>
                        </lightning:layoutItem>
                    </lightning:layout>
                    <lightning:layout>
                        <lightning:layoutItem size="4">
                            <lightning:input label="{!$Label.c.Search_Postal_Code}" value="{!v.searchFields.postal_code}" type="text" variant="standard"/>
                        </lightning:layoutItem>
                        <lightning:layoutItem size="8">
                            <lightning:input label="{!$Label.c.Search_City}" value="{!v.searchFields.city}" type="text" variant="standard"/>
                        </lightning:layoutItem>
                    </lightning:layout>
                    <lightning:layout>
                        <lightning:layoutItem size="12">
                            <lightning:input label="Phone" value="{!v.searchFields.phone}" type="text" variant="standard"/>
                        </lightning:layoutItem>
                    </lightning:layout>
                </lightning:layoutItem>
            </lightning:layout>
        </div>

        <!--
        <div class="slds-form slds-form_horizontal">
            <lightning:input class="slds-p-right_none slds-p-left_none" label="{!$Label.c.Search_Trade_Name}"
                type="text" variant="standard" value="{!v.searchFields.name}" disabled="{!v.disableSearch}"/>
            <lightning:input class="slds-p-right_none slds-p-left_none" label="{!$Label.c.Search_Dossier_Number}"
                type="text" variant="standard" value="{!v.searchFields.dossier_number}" onchange="{!c.populateDossier}"/>
            <lightning:input class="slds-p-right_none slds-p-left_none" label="{!$Label.c.Search_Phone}"
                type="text" variant="standard" value="{!v.searchFields.phone}" disabled="{!v.disableSearch}"/>
            <lightning:input class="slds-p-right_none slds-p-left_none" label="{!$Label.c.Search_Domain}"
                type="text" variant="standard" value="{!v.searchFields.domain}" disabled="{!v.disableSearch}"/>
            <lightning:inputAddress aura:id="Address"
                addressLabel="{!$Label.c.Search_Address}" streetLabel="{!$Label.c.Search_Street}"
                cityLabel="{!$Label.c.Search_City}" provinceLabel="{!$Label.c.Search_Province}"
                postalCodeLabel="{!$Label.c.Search_Postal_Code}" countryLabel="{!$Label.c.Search_Country}"
                country="{!v.searchFields.country}" street="{!v.searchFields.street}" city="{!v.searchFields.city}"
                postalCode="{!v.searchFields.postcode}" province="{!v.searchFields.province}" disabled="{!v.disableSearch}"/>

        </div>-->
    </lightning:card>
</aura:component>