/**
* Created by Asifsayyed on 02/12/18.
* @Description:Helper to CompanyDetailsController
* TBD make generic class to take request based on new form params
* TBD Mapping of parameters
* TBD Error Handling
*/
public with sharing class CompanyDetailsControllerHelper {

    private static wwwWebservicesNlSoap.Webservices_nlPort stub;
    private static list<wwwWebservicesNlSoap.DutchBusinessReferenceV2> searchResults;
    private static wwwWebservicesNlSoap.DutchBusinessReferenceV2PagedResult returnedResults;
    private static wwwWebservicesNlSoap.HeaderLoginType header;
    private static string param,postCode,telephoneNumber,domainName;
    public  static Credentials__c cs;

    /**
    * @description :Sets username and password in header
    */
    public static wwwWebservicesNlSoap.HeaderLoginType getAuthentication(){
        CS = Credentials__c.getOrgDefaults();
        header= new wwwWebservicesNlSoap.HeaderLoginType();
        header.userName=cs.Username__c;//'appsolutelytest_bfc9bbb2';
        header.passWord=cs.Password__c;//'5Z9wwVa-hYzy*mFY)VW.-U$!5Vu}Ymc{';//
        System.debug('get auth');
        System.debug(header);
        return header;
    }

    /**
    * @description :Sets header
    * @param String searchText
    */
    public static wwwWebservicesNlSoap.DutchBusinessReferenceV2[] search(CompanyDetailsControllerHelper.CompanySearchDto searchParams){
        // param=searchText;
        // domainName='';//TBD
        // if(checkTelephone(searchText)==True){
        //     telephoneNumber=searchText;
        // }
        // else{
        //     telephoneNumber='';
        // }
        // if(checkPostCode(searchText)==True){
        //     postCode=searchText;
        // }
        // else {
        //     postCode='';
        // }

        System.debug('helper');

        stub=new wwwWebservicesNlSoap.Webservices_nlPort();
        stub.HeaderLogin= getAuthentication();
        try{
            //dutchBusinessSearchParametersV2(String trade_name,String city,String street,String postcode,Integer house_number,String house_number_addition,String telephone_number,String domain_name,Boolean strict_search,Integer page) {
            returnedResults=stub.dutchBusinessSearchParametersV2(searchParams.name,searchParams.city,searchParams.street,searchParams.postcode,null,null,searchParams.phone,searchParams.domain,Constants.Strict_Search,Constants.paramInt);
            System.debug('RETURNED');
            System.debug(returnedResults);
            System.debug(returnedResults.results);
            System.debug(returnedResults.results.item);
            System.debug(returnedResults.results.item[0]);

            //DutchBusinessReferenceV2PagedResult:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), errorcode=null, field_order_type_info=(paging, results), paging=ResultInfo:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), curpage=1, curpage_type_info=(curpage, http://www.webservices.nl/soap/, int, 1, 1, false), field_order_type_info=(curpage, perpage, numpages, numresults, maxresults), maxresults=100, maxresults_type_info=(maxresults, http://www.webservices.nl/soap/, int, 1, 1, false), numpages=5, numpages_type_info=(numpages, http://www.webservices.nl/soap/, int, 1, 1, false), numresults=100, numresults_type_info=(numresults, http://www.webservices.nl/soap/, int, 1, 1, false), perpage=20, perpage_type_info=(perpage, http://www.webservices.nl/soap/, int, 1, 1, false)], paging_type_info=(paging, http://www.webservices.nl/soap/, ResultInfo, 1, 1, false), results=DutchBusinessReferenceV2Array:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), field_order_type_info=(item), item=(DutchBusinessReferenceV2:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), correspondence_city=UTRECHT, correspondence_city_type_info=(correspondence_city, http://www.webservices.nl/soap/, string, 1, 1, false), correspondence_street=Burgemeester Verderlaan, correspondence_street_type_info=(correspondence_street, http://www.webservices.nl/soap/, string, 1, 1, false), dossier_number=67511325, dossier_number_type_info=(dossier_number, http://www.webservices.nl/soap/, string, 1, 1, false), establishment_city=UTRECHT, establishment_city_type_info=(establishment_city, http://www.webservices.nl/soap/, string, 1, 1, false), establishment_number=000036043249, establishment_number_type_info=(establishment_number, http://www.webservices.nl/soap/, string, 0, 1, false), establishment_street=Burgemeester Verderlaan, establishment_street_type_info=(establishment_street, http://www.webservices.nl/soap/, string, 1, 1, false), field_order_type_info=(dossier_number, establishment_number, name, match_type, establishment_city, establishment_street, correspondence_city, correspondence_street, indication_economically_active), indication_economically_active=true, indication_economically_active_type_info=(indication_economically_active, http://www.webservices.nl/soap/, boolean, 1, 1, false), match_type=legal_name, match_type_type_info=(match_type, http://www.webservices.nl/soap/, string, 0, 1, false), name=APPSolutely B.V., name_type_info=(name, http://www.webservices.nl/soap/, string, 1, 1, false)], DutchBusinessReferenceV2:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), correspondence_city=UTRECHT, correspondence_city_type_info=(correspondence_city, http://www.webservices.nl/soap/, string, 1, 1, false), correspondence_street=Burgemeester Verderlaan, correspondence_street_type_info=(correspondence_street, http://www.webservices.nl/soap/, string, 1, 1, false), dossier_number=71836489, dossier_number_type_info=(dossier_number, http://www.webservices.nl/soap/, string, 1, 1, false), establishment_city=UTRECHT, establishment_city_type_info=(establishment_city, http://www.webservices.nl/soap/, string, 1, 1, false), establishment_number=null, establishment_number_type_info=(establishment_number, http://www.webservices.nl/soap/, string, 0, 1, false), establishment_street=Burgemeester Verderlaan, establishment_street_type_info=(establishment_street, http://www.webservices.nl/soap/, string, 1, 1, false), field_order_type_info=(dossier_number, establishment_number, name, match_type, establishment_city, establishment_street, correspondence_city, correspondence_street, indication_economically_active), indication_economically_active=false, indication_economically_active_type_info=(indication_economically_active, http://www.webservices.nl/soap/, boolean, 1, 1, false), match_type=legal_name, match_type_type_info=(match_type, http://www.webservices.nl/soap/, string, 0, 1, false), name=APPSolutely Personeelsvereniging, name_type_info=(name, http://www.webservices.nl/soap/, string, 1, 1, false)], DutchBusinessReferenceV2:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), correspondence_city=UTRECHT, correspondence_city_type_info=(correspondence_city, http://www.webservices.nl/soap/, string, 1, 1, false), correspondence_street=Burgemeester Verderlaan, correspondence_street_type_info=(correspondence_street, http://www.webservices.nl/soap/, string, 1, 1, false), dossier_number=05083803, dossier_number_type_info=(dossier_number, http://www.webservices.nl/soap/, string, 1, 1, false), establishment_city=UTRECHT, establishment_city_type_info=(establishment_city, http://www.webservices.nl/soap/, string, 1, 1, false), establishment_number=000039101509, establishment_number_type_info=(establishment_number, http://www.webservices.nl/soap/, string, 0, 1, false), establishment_street=Burgemeester Verderlaan, establishment_street_type_info=(establishment_street, http://www.webservices.nl/soap/, string, 1, 1, false), field_order_type_info=(dossier_number, establishment_number, name, match_type, establishment_city, establishment_street, correspondence_city, correspondence_street, indication_economically_active), indication_economically_active=false, indication_economically_active_type_info=(indication_economically_active, http://www.webservices.nl/soap/, boolean, 1, 1, false), match_type=undetermined, match_type_type_info=(match_type, http://www.webservices.nl/soap/, string, 0, 1, false), name=Pento Audiologisch Centrum Utrecht, name_type_info=(name, http://www.webservices.nl/soap/, string, 1, 1, false)], DutchBusinessReferenceV2:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), correspondence_city=UTRECHT, correspondence_city_type_info=(correspondence_city, http://www.webservices.nl/soap/, string, 1, 1, false), correspondence_street=Burgemeester Verderlaan, correspondence_street_type_info=(correspondence_street, http://www.webservices.nl/soap/, string, 1, 1, false), dossier_number=24403408, dossier_number_type_info=(dossier_number, http://www.webservices.nl/soap/, string, 1, 1, false), establishment_city=UTRECHT, establishment_city_type_info=(establishment_city, http://www.webservices.nl/soap/, string, 1, 1, false), establishment_number=000039662667, establishment_number_type_info=(establishment_number, http://www.webservices.nl/soap/, string, 0, 1, false), establishment_street=Burgemeester Verderlaan, establishment_street_type_info=(establishment_street, http://www.webservices.nl/soap/, string, 1, 1, false), field_order_type_info=(dossier_number, establishment_number, name, match_type, establishment_city, establishment_street, correspondence_city, correspondence_street, indication_economically_active), indication_economically_active=true, indication_economically_active_type_info=(indication_economically_active, http://www.webservices.nl/soap/, boolean, 1, 1, false), match_type=undetermined, match_type_type_info=(match_type, http://www.webservices.nl/soap/, string, 0, 1, false), name=Mentaal Beter Utrecht, name_type_info=(name, http://www.webservices.nl/soap/, string, 1, 1, false)], DutchBusinessReferenceV2:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), correspondence_city=UTRECHT, correspondence_city_type_info=(correspondence_city, http://www.webservices.nl/soap/, string, 1, 1, false), correspondence_street=Burgemeester Verderlaan, correspondence_street_type_info=(correspondence_street, http://www.webservices.nl/soap/, string, 1, 1, false), dossier_number=30201420, dossier_number_type_info=(dossier_number, http://www.webservices.nl/soap/, string, 1, 1, false), establishment_city=UTRECHT, establishment_city_type_info=(establishment_city, http://www.webservices.nl/soap/, string, 1, 1, false), establishment_number=null, establishment_number_type_info=(establishment_number, http://www.webservices.nl/soap/, string, 0, 1, false), establishment_street=Burgemeester Verderlaan, establishment_street_type_info=(establishment_street, http://www.webservices.nl/soap/, string, 1, 1, false), field_order_type_info=(dossier_number, establishment_number, name, match_type, establishment_city, establishment_street, correspondence_city, correspondence_street, indication_economically_active), indication_economically_active=false, indication_economically_active_type_info=(indication_economically_active, http://www.webservices.nl/soap/, boolean, 1, 1, false), match_type=undetermined, match_type_type_info=(match_type, http://www.webservices.nl/soap/, string, 0, 1, false), name=Stichting Islamitisch Centrum Utrecht-Leidsche Rijn, name_type_info=(name, http://www.webservices.nl/soap/, string, 1, 1, false)], DutchBusinessReferenceV2:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), correspondence_city=UTRECHT, correspondence_city_type_info=(correspondence_city, http://www.webservices.nl/soap/, string, 1, 1, false), correspondence_street=Burgemeester Verderlaan, correspondence_street_type_info=(correspondence_street, http://www.webservices.nl/soap/, string, 1, 1, false), dossier_number=52208222, dossier_number_type_info=(dossier_number, http://www.webservices.nl/soap/, string, 1, 1, false), establishment_city=UTRECHT, establishment_city_type_info=(establishment_city, http://www.webservices.nl/soap/, string, 1, 1, false), establishment_number=null, establishment_number_type_info=(establishment_number, http://www.webservices.nl/soap/, string, 0, 1, false), establishment_street=Koekoekstraat, establishment_street_type_info=(establishment_street, http://www.webservices.nl/soap/, string, 1, 1, false), field_order_type_info=(dossier_number, establishment_number, name, match_type, establishment_city, establishment_street, correspondence_city, correspondence_street, indication_economically_active), indication_economically_active=false, indication_economically_active_type_info=(indication_economically_active, http://www.webservices.nl/soap/, boolean, 1, 1, false), match_type=undetermined, match_type_type_info=(match_type, http://www.webservices.nl/soap/, string, 0, 1, false), name=Vereniging van Eigenaars Koekoekstraat 22 en 22A in Utrecht, name_type_info=(name, http://www.webservices.nl/soap/, string, 1, 1, false)], DutchBusinessReferenceV2:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), correspondence_city=UTRECHT, correspondence_city_type_info=(correspondence_city, http://www.webservices.nl/soap/, string, 1, 1, false), correspondence_street=Burgemeester Verderlaan, correspondence_street_type_info=(correspondence_street, http://www.webservices.nl/soap/, string, 1, 1, false), dossier_number=52968073, dossier_number_type_info=(dossier_number, http://www.webservices.nl/soap/, string, 1, 1, false), establishment_city=UTRECHT, establishment_city_type_info=(establishment_city, http://www.webservices.nl/soap/, string, 1, 1, false), establishment_number=null, establishment_number_type_info=(establishment_number, http://www.webservices.nl/soap/, string, 0, 1, false), establishment_street=Burgemeester Verderlaan, establishment_street_type_info=(establishment_street, http://www.webservices.nl/soap/, string, 1, 1, false), field_order_type_info=(dossier_number, establishment_number, name, match_type, establishment_city, establishment_street, correspondence_city, correspondence_street, indication_economically_active), indication_economically_active=false, indication_economically_active_type_info=(indication_economically_active, http://www.webservices.nl/soap/, boolean, 1, 1, false), match_type=undetermined, match_type_type_info=(match_type, http://www.webservices.nl/soap/, string, 0, 1, false), name=Vereniging van Eigenaars Kievitdwarsstraat 14 en 14 a te Utrecht, name_type_info=(name, http://www.webservices.nl/soap/, string, 1, 1, false)], DutchBusinessReferenceV2:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), correspondence_city=UTRECHT, correspondence_city_type_info=(correspondence_city, http://www.webservices.nl/soap/, string, 1, 1, false), correspondence_street=Burgemeester Verderlaan, correspondence_street_type_info=(correspondence_street, http://www.webservices.nl/soap/, string, 1, 1, false), dossier_number=30184875, dossier_number_type_info=(dossier_number, http://www.webservices.nl/soap/, string, 1, 1, false), establishment_city=UTRECHT, establishment_city_type_info=(establishment_city, http://www.webservices.nl/soap/, string, 1, 1, false), establishment_number=000001382969, establishment_number_type_info=(establishment_number, http://www.webservices.nl/soap/, string, 0, 1, false), establishment_street=Burgemeester Verderlaan, establishment_street_type_info=(establishment_street, http://www.webservices.nl/soap/, string, 1, 1, false), field_order_type_info=(dossier_number, establishment_number, name, match_type, establishment_city, establishment_street, correspondence_city, correspondence_street, indication_economically_active), indication_economically_active=false, indication_economically_active_type_info=(indication_economically_active, http://www.webservices.nl/soap/, boolean, 1, 1, false), match_type=undetermined, match_type_type_info=(match_type, http://www.webservices.nl/soap/, string, 0, 1, false), name=Sep Beheer, name_type_info=(name, http://www.webservices.nl/soap/, string, 1, 1, false)], DutchBusinessReferenceV2:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), correspondence_city=UTRECHT, correspondence_city_type_info=(correspondence_city, http://www.webservices.nl/soap/, string, 1, 1, false), correspondence_street=Burgemeester Verderlaan, correspondence_street_type_info=(correspondence_street, http://www.webservices.nl/soap/, string, 1, 1, false), dossier_number=30235633, dossier_number_type_info=(dossier_number, http://www.webservices.nl/soap/, string, 1, 1, false), establishment_city=UTRECHT, establishment_city_type_info=(establishment_city, http://www.webservices.nl/soap/, string, 1, 1, false), establishment_number=000006758649, establishment_number_type_info=(establishment_number, http://www.webservices.nl/soap/, string, 0, 1, false), establishment_street=Burgemeester Verderlaan, establishment_street_type_info=(establishment_street, http://www.webservices.nl/soap/, string, 1, 1, false), field_order_type_info=(dossier_number, establishment_number, name, match_type, establishment_city, establishment_street, correspondence_city, correspondence_street, indication_economically_active), indication_economically_active=true, indication_economically_active_type_info=(indication_economically_active, http://www.webservices.nl/soap/, boolean, 1, 1, false), match_type=undetermined, match_type_type_info=(match_type, http://www.webservices.nl/soap/, string, 0, 1, false), name=Garuda projectontwikkeling en consultancy, name_type_info=(name, http://www.webservices.nl/soap/, string, 1, 1, false)], DutchBusinessReferenceV2:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), correspondence_city=UTRECHT, correspondence_city_type_info=(correspondence_city, http://www.webservices.nl/soap/, string, 1, 1, false), correspondence_street=Burgemeester Verderlaan, correspondence_street_type_info=(correspondence_street, http://www.webservices.nl/soap/, string, 1, 1, false), dossier_number=08033388, dossier_number_type_info=(dossier_number, http://www.webservices.nl/soap/, string, 1, 1, false), establishment_city=UTRECHT, establishment_city_type_info=(establishment_city, http://www.webservices.nl/soap/, string, 1, 1, false), establishment_number=000007015895, establishment_number_type_info=(establishment_number, http://www.webservices.nl/soap/, string, 0, 1, false), establishment_street=Burgemeester Verderlaan, establishment_street_type_info=(establishment_street, http://www.webservices.nl/soap/, string, 1, 1, false), field_order_type_info=(dossier_number, establishment_number, name, match_type, establishment_city, establishment_street, correspondence_city, correspondence_street, indication_economically_active), indication_economically_active=true, indication_economically_active_type_info=(indication_economically_active, http://www.webservices.nl/soap/, boolean, 1, 1, false), match_type=undetermined, match_type_type_info=(match_type, http://www.webservices.nl/soap/, string, 0, 1, false), name=Bartels Ingenieursbureau, name_type_info=(name, http://www.webservices.nl/soap/, string, 1, 1, false)], ...), item_type_info=(item, http://www.webservices.nl/soap/, DutchBusinessReferenceV2, 0, -1, false)], results_type_info=(results, http://www.webservices.nl/soap/, DutchBusinessReferenceV2Array, 1, 1, false)]
        }
        catch (System.CalloutException ex){
            System.debug('ERROR:' + ex.getMessage());
            throw new AuraHandledException(ex.getMessage());
        }

        if(returnedResults.results.item.size()>0){
            searchResults=returnedResults.results.item;
        }
        else{
            System.debug('no items');
            // searchResults=returnedResults;
        }
        //return parsed result
        return searchResults;
    }

    public static wwwWebservicesNlSoap.DutchBusinessDossierV3 getInfo(String dossierNumber) {
        System.debug('getInfo');
        System.debug(dossierNumber);
        stub=new wwwWebservicesNlSoap.Webservices_nlPort(); 
        stub.HeaderLogin= getAuthentication();
        try{
            wwwWebservicesNlSoap.DutchBusinessDossierV3 response = stub.dutchBusinessGetDossierV3(dossierNumber, '000036043249');
            System.debug('RETURNED');
            System.debug(response);
            //DutchBusinessDossierV3:[annual_financial_statement_summary=null, annual_financial_statement_summary_type_info=(annual_financial_statement_summary, http://www.webservices.nl/soap/, DutchBusinessAnnualFinancialStatementSummary, 0, 1, false), apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), authorized_share_capital=null, authorized_share_capital_currency=null, authorized_share_capital_currency_type_info=(authorized_share_capital_currency, http://www.webservices.nl/soap/, string, 0, 1, false), authorized_share_capital_type_info=(authorized_share_capital, http://www.webservices.nl/soap/, long, 0, 1, false), chamber_number=30, chamber_number_type_info=(chamber_number, http://www.webservices.nl/soap/, string, 1, 1, false), class_personnel=5, class_personnel_ci=1, class_personnel_ci_type_info=(class_personnel_ci, http://www.webservices.nl/soap/, int, 1, 1, false), class_personnel_fulltime=5, class_personnel_fulltime_type_info=(class_personnel_fulltime, http://www.webservices.nl/soap/, int, 1, 1, false), class_personnel_type_info=(class_personnel, http://www.webservices.nl/soap/, int, 1, 1, false), contact_gender=, contact_gender_type_info=(contact_gender, http://www.webservices.nl/soap/, string, 1, 1, false), contact_initials=, contact_initials_type_info=(contact_initials, http://www.webservices.nl/soap/, string, 1, 1, false), contact_prefix=, contact_prefix_type_info=(contact_prefix, http://www.webservices.nl/soap/, string, 1, 1, false), contact_surname=, contact_surname_type_info=(contact_surname, http://www.webservices.nl/soap/, string, 1, 1, false), contact_title1=, contact_title1_type_info=(contact_title1, http://www.webservices.nl/soap/, string, 1, 1, false), contact_title2=, contact_title2_type_info=(contact_title2, http://www.webservices.nl/soap/, string, 1, 1, false), continuation_date=null, continuation_date_type_info=(continuation_date, http://www.webservices.nl/soap/, DutchBusinessDateV3, 0, 1, false), correspondence_address=DutchBusinessFormattedAddress:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), field_order_type_info=(original, official, formatted), formatted=DutchBusinessAddressV3:[address=null, address_type_info=(address, http://www.webservices.nl/soap/, string, 0, 1, false), apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), city=Utrecht, city_type_info=(city, http://www.webservices.nl/soap/, string, 0, 1, false), country=NLD, country_type_info=(country, http://www.webservices.nl/soap/, string, 0, 1, false), field_order_type_info=(address, postcode, city, street, house_number, house_number_addition, country), house_number=15, house_number_addition=, house_number_addition_type_info=(house_number_addition, http://www.webservices.nl/soap/, string, 0, 1, false), house_number_type_info=(house_number, http://www.webservices.nl/soap/, int, 0, 1, false), postcode=3544AD, postcode_type_info=(postcode, http://www.webservices.nl/soap/, string, 0, 1, false), street=Burgemeester Verderlaan, street_type_info=(street, http://www.webservices.nl/soap/, string, 0, 1, false)], formatted_type_info=(formatted, http://www.webservices.nl/soap/, DutchBusinessAddressV3, 0, 1, false), official=DutchBusinessAddressV3:[address=null, address_type_info=(address, http://www.webservices.nl/soap/, string, 0, 1, false), apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), city=Utrecht, city_type_info=(city, http://www.webservices.nl/soap/, string, 0, 1, false), country=Nederland, country_type_info=(country, http://www.webservices.nl/soap/, string, 0, 1, false), field_order_type_info=(address, postcode, city, street, house_number, house_number_addition, country), house_number=15, house_number_addition=, house_number_addition_type_info=(house_number_addition, http://www.webservices.nl/soap/, string, 0, 1, false), house_number_type_info=(house_number, http://www.webservices.nl/soap/, int, 0, 1, false), postcode=3544AD, postcode_type_info=(postcode, http://www.webservices.nl/soap/, string, 0, 1, false), street=Burgemeester Verderlaan, street_type_info=(street, http://www.webservices.nl/soap/, string, 0, 1, false)], official_type_info=(official, http://www.webservices.nl/soap/, DutchBusinessAddressV3, 0, 1, false), original=DutchBusinessAddressV3:[address=null, address_type_info=(address, http://www.webservices.nl/soap/, string, 0, 1, false), apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), city=UTRECHT, city_type_info=(city, http://www.webservices.nl/soap/, string, 0, 1, false), country=NLD, country_type_info=(country, http://www.webservices.nl/soap/, string, 0, 1, false), field_order_type_info=(address, postcode, city, street, house_number, house_number_addition, country), house_number=15, house_number_addition=, house_number_addition_type_info=(house_number_addition, http://www.webservices.nl/soap/, string, 0, 1, false), house_number_type_info=(house_number, http://www.webservices.nl/soap/, int, 0, 1, false), postcode=3544AD, postcode_type_info=(postcode, http://www.webservices.nl/soap/, string, 0, 1, false), street=Burgemeester Verderlaan, street_type_info=(street, http://www.webservices.nl/soap/, string, 0, 1, false)], original_type_info=(original, http://www.webservices.nl/soap/, DutchBusinessAddressV3, 0, 1, false)], correspondence_address_type_info=(correspondence_address, http://www.webservices.nl/soap/, DutchBusinessFormattedAddress, 0, 1, false), discontinuation_date=null, discontinuation_date_type_info=(discontinuation_date, http://www.webservices.nl/soap/, DutchBusinessDateV3, 0, 1, false), domain_name=, domain_name_type_info=(domain_name, http://www.webservices.nl/soap/, string, 1, 1, false), dossier_number=67511325, dossier_number_type_info=(dossier_number, http://www.webservices.nl/soap/, string, 1, 1, false), establishment_address=DutchBusinessFormattedAddress:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), field_order_type_info=(original, official, formatted), formatted=DutchBusinessAddressV3:[address=null, address_type_info=(address, http://www.webservices.nl/soap/, string, 0, 1, false), apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), city=Utrecht, city_type_info=(city, http://www.webservices.nl/soap/, string, 0, 1, false), country=null, country_type_info=(country, http://www.webservices.nl/soap/, string, 0, 1, false), field_order_type_info=(address, postcode, city, street, house_number, house_number_addition, country), house_number=15, house_number_addition=, house_number_addition_type_info=(house_number_addition, http://www.webservices.nl/soap/, string, 0, 1, false), house_number_type_info=(house_number, http://www.webservices.nl/soap/, int, 0, 1, false), postcode=3544AD, postcode_type_info=(postcode, http://www.webservices.nl/soap/, string, 0, 1, false), street=Burgemeester Verderlaan, street_type_info=(street, http://www.webservices.nl/soap/, string, 0, 1, false)], formatted_type_info=(formatted, http://www.webservices.nl/soap/, DutchBusinessAddressV3, 0, 1, false), official=DutchBusinessAddressV3:[address=null, address_type_info=(address, http://www.webservices.nl/soap/, string, 0, 1, false), apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), city=Utrecht, city_type_info=(city, http://www.webservices.nl/soap/, string, 0, 1, false), country=null, country_type_info=(country, http://www.webservices.nl/soap/, string, 0, 1, false), field_order_type_info=(address, postcode, city, street, house_number, house_number_addition, country), house_number=15, house_number_addition=, house_number_addition_type_info=(house_number_addition, http://www.webservices.nl/soap/, string, 0, 1, false), house_number_type_info=(house_number, http://www.webservices.nl/soap/, int, 0, 1, false), postcode=3544AD, postcode_type_info=(postcode, http://www.webservices.nl/soap/, string, 0, 1, false), street=Burgemeester Verderlaan, street_type_info=(street, http://www.webservices.nl/soap/, string, 0, 1, false)], official_type_info=(official, http://www.webservices.nl/soap/, DutchBusinessAddressV3, 0, 1, false), original=DutchBusinessAddressV3:[address=null, address_type_info=(address, http://www.webservices.nl/soap/, string, 0, 1, false), apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), city=UTRECHT, city_type_info=(city, http://www.webservices.nl/soap/, string, 0, 1, false), country=null, country_type_info=(country, http://www.webservices.nl/soap/, string, 0, 1, false), field_order_type_info=(address, postcode, city, street, house_number, house_number_addition, country), house_number=15, house_number_addition=, house_number_addition_type_info=(house_number_addition, http://www.webservices.nl/soap/, string, 0, 1, false), house_number_type_info=(house_number, http://www.webservices.nl/soap/, int, 0, 1, false), postcode=3544AD, postcode_type_info=(postcode, http://www.webservices.nl/soap/, string, 0, 1, false), street=Burgemeester Verderlaan, street_type_info=(street, http://www.webservices.nl/soap/, string, 0, 1, false)], original_type_info=(original, http://www.webservices.nl/soap/, DutchBusinessAddressV3, 0, 1, false)], establishment_address_type_info=(establishment_address, http://www.webservices.nl/soap/, DutchBusinessFormattedAddress, 0, 1, false), establishment_date=DutchBusinessDateV3:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), day=19, day_type_info=(day, http://www.webservices.nl/soap/, int, 0, 1, false), field_order_type_info=(year, month, day), month=12, month_type_info=(month, http://www.webservices.nl/soap/, int, 0, 1, false), year=2016, year_type_info=(year, http://www.webservices.nl/soap/, int, 0, 1, false)], establishment_date_type_info=(establishment_date, http://www.webservices.nl/soap/, DutchBusinessDateV3, 0, 1, false), establishment_number=000036043249, establishment_number_type_info=(establishment_number, http://www.webservices.nl/soap/, string, 0, 1, false), field_order_type_info=(update_info, dossier_number, establishment_number, main_establishment_number, indication_main_establishment, rsin_number, chamber_number, legal_form_code, legal_form_text, indication_organisation_code, ...), founding_date=DutchBusinessDateV3:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), day=19, day_type_info=(day, http://www.webservices.nl/soap/, int, 0, 1, false), field_order_type_info=(year, month, day), month=12, month_type_info=(month, http://www.webservices.nl/soap/, int, 0, 1, false), year=2016, year_type_info=(year, http://www.webservices.nl/soap/, int, 0, 1, false)], founding_date_type_info=(founding_date, http://www.webservices.nl/soap/, DutchBusinessDateV3, 0, 1, false), indication_bankruptcy=false, indication_bankruptcy_type_info=(indication_bankruptcy, http://www.webservices.nl/soap/, boolean, 1, 1, false), indication_dip=false, indication_dip_type_info=(indication_dip, http://www.webservices.nl/soap/, boolean, 1, 1, false), indication_economically_active=true, indication_economically_active_type_info=(indication_economically_active, http://www.webservices.nl/soap/, boolean, 1, 1, false), indication_export=false, indication_export_type_info=(indication_export, http://www.webservices.nl/soap/, boolean, 0, 1, false), indication_import=false, indication_import_type_info=(indication_import, http://www.webservices.nl/soap/, boolean, 0, 1, false), indication_main_establishment=true, indication_main_establishment_type_info=(indication_main_establishment, http://www.webservices.nl/soap/, boolean, 1, 1, false), indication_non_mailing=true, indication_non_mailing_type_info=(indication_non_mailing, http://www.webservices.nl/soap/, boolean, 1, 1, false), indication_organisation_code=O, indication_organisation_code_type_info=(indication_organisation_code, http://www.webservices.nl/soap/, string, 1, 1, false), insolvencies=null, insolvencies_type_info=(insolvencies, http://www.webservices.nl/soap/, DutchBusinessInsolvencyArray, 0, 1, false), issued_share_capital=1000, issued_share_capital_currency=EUR, issued_share_capital_currency_type_info=(issued_share_capital_currency, http://www.webservices.nl/soap/, string, 0, 1, false), issued_share_capital_type_info=(issued_share_capital, http://www.webservices.nl/soap/, long, 0, 1, false), legal_form_code=41, legal_form_code_type_info=(legal_form_code, http://www.webservices.nl/soap/, string, 1, 1, false), legal_form_text=Besloten Vennootschap met gewone structuur, legal_form_text_type_info=(legal_form_text, http://www.webservices.nl/soap/, string, 1, 1, false), legal_name=APPSolutely B.V., legal_name_type_info=(legal_name, http://www.webservices.nl/soap/, string, 1, 1, false), main_establishment_number=000036043249, main_establishment_number_type_info=(main_establishment_number, http://www.webservices.nl/soap/, string, 0, 1, false), mobile_number=, mobile_number_type_info=(mobile_number, http://www.webservices.nl/soap/, string, 1, 1, false), paid_up_share_capital=1000, paid_up_share_capital_currency=EUR, paid_up_share_capital_currency_type_info=(paid_up_share_capital_currency, http://www.webservices.nl/soap/, string, 0, 1, false), paid_up_share_capital_type_info=(paid_up_share_capital, http://www.webservices.nl/soap/, long, 0, 1, false), personnel=10, personnel_ci=0, personnel_ci_reference_date=DutchBusinessDateV3:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), day=0, day_type_info=(day, http://www.webservices.nl/soap/, int, 0, 1, false), field_order_type_info=(year, month, day), month=0, month_type_info=(month, http://www.webservices.nl/soap/, int, 0, 1, false), year=2017, year_type_info=(year, http://www.webservices.nl/soap/, int, 0, 1, false)], personnel_ci_reference_date_type_info=(personnel_ci_reference_date, http://www.webservices.nl/soap/, DutchBusinessDateV3, 0, 1, false), personnel_ci_type_info=(personnel_ci, http://www.webservices.nl/soap/, int, 1, 1, false), personnel_fulltime=10, personnel_fulltime_type_info=(personnel_fulltime, http://www.webservices.nl/soap/, int, 1, 1, false), personnel_reference_date=DutchBusinessDateV3:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), day=11, day_type_info=(day, http://www.webservices.nl/soap/, int, 0, 1, false), field_order_type_info=(year, month, day), month=10, month_type_info=(month, http://www.webservices.nl/soap/, int, 0, 1, false), year=2017, year_type_info=(year, http://www.webservices.nl/soap/, int, 0, 1, false)], personnel_reference_date_type_info=(personnel_reference_date, http://www.webservices.nl/soap/, DutchBusinessDateV3, 0, 1, false), personnel_type_info=(personnel, http://www.webservices.nl/soap/, int, 1, 1, false), primary_sbi_code=70221, primary_sbi_code_text=Organisatie-adviesbureaus, primary_sbi_code_text_type_info=(primary_sbi_code_text, http://www.webservices.nl/soap/, string, 1, 1, false), primary_sbi_code_type_info=(primary_sbi_code, http://www.webservices.nl/soap/, string, 1, 1, false), rsin_number=857039878, rsin_number_type_info=(rsin_number, http://www.webservices.nl/soap/, string, 0, 1, false), sbi_collection=DutchBusinessSBICollection:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), company_info=DutchBusinessSBICodeArray:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), field_order_type_info=(item), item=(DutchBusinessSBICode:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), description=Advisering op het gebied van management en bedrijfsvoering (geen public relations en organisatie- adviesbureaus), description_type_info=(description, http://www.webservices.nl/soap/, string, 1, 1, false), field_order_type_info=(sbi_code, description), sbi_code=70222, sbi_code_type_info=(sbi_code, http://www.webservices.nl/soap/, string, 1, 1, false)]), item_type_info=(item, http://www.webservices.nl/soap/, DutchBusinessSBICode, 0, -1, false)], company_info_type_info=(company_info, http://www.webservices.nl/soap/, DutchBusinessSBICodeArray, 0, 1, false), field_order_type_info=(original, company_info), original=DutchBusinessSBICodeArray:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), field_order_type_info=(item), item=(DutchBusinessSBICode:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), description=Organisatie-adviesbureaus, description_type_info=(description, http://www.webservices.nl/soap/, string, 1, 1, false), field_order_type_info=(sbi_code, description), sbi_code=70221, sbi_code_type_info=(sbi_code, http://www.webservices.nl/soap/, string, 1, 1, false)]), item_type_info=(item, http://www.webservices.nl/soap/, DutchBusinessSBICode, 0, -1, false)], original_type_info=(original, http://www.webservices.nl/soap/, DutchBusinessSBICodeArray, 1, 1, false)], sbi_collection_type_info=(sbi_collection, http://www.webservices.nl/soap/, DutchBusinessSBICollection, 0, 1, false), secondary_sbi_code1=, secondary_sbi_code1_text=, secondary_sbi_code1_text_type_info=(secondary_sbi_code1_text, http://www.webservices.nl/soap/, string, 1, 1, false), secondary_sbi_code1_type_info=(secondary_sbi_code1, http://www.webservices.nl/soap/, string, 1, 1, false), secondary_sbi_code2=, secondary_sbi_code2_text=, secondary_sbi_code2_text_type_info=(secondary_sbi_code2_text, http://www.webservices.nl/soap/, string, 1, 1, false), secondary_sbi_code2_type_info=(secondary_sbi_code2, http://www.webservices.nl/soap/, string, 1, 1, false), structure=null, structure_type_info=(structure, http://www.webservices.nl/soap/, DutchBusinessStructure, 0, 1, false), telephone_number=, telephone_number_type_info=(telephone_number, http://www.webservices.nl/soap/, string, 1, 1, false), trade_name_45=APPSolutely B.V., trade_name_45_type_info=(trade_name_45, http://www.webservices.nl/soap/, string, 1, 1, false), trade_name_full=APPSolutely B.V., trade_name_full_type_info=(trade_name_full, http://www.webservices.nl/soap/, string, 1, 1, false), trade_names=stringArray:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), field_order_type_info=(item), item=(APPSolutely B.V.), item_type_info=(item, http://www.webservices.nl/soap/, string, 0, -1, false)], trade_names_type_info=(trade_names, http://www.webservices.nl/soap/, stringArray, 0, 1, false), update_info=DutchBusinessUpdateReference:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), date_last_update=2018-07-26 00:00:00, date_last_update_type_info=(date_last_update, http://www.webservices.nl/soap/, date, 1, 1, false), dossier_number=67511325, dossier_number_type_info=(dossier_number, http://www.webservices.nl/soap/, string, 1, 1, false), establishment_number=000036043249, establishment_number_type_info=(establishment_number, http://www.webservices.nl/soap/, string, 0, 1, false), field_order_type_info=(dossier_number, establishment_number, update_types, date_last_update), update_types=stringArray:[apex_schema_type_info=(http://www.webservices.nl/soap/, true, false), field_order_type_info=(item), item=(Tradenames), item_type_info=(item, http://www.webservices.nl/soap/, string, 0, -1, false)], update_types_type_info=(update_types, http://www.webservices.nl/soap/, stringArray, 1, 1, false)], update_info_type_info=(update_info, http://www.webservices.nl/soap/, DutchBusinessUpdateReference, 1, 1, false)]
            return response;
        }
        catch (System.CalloutException ex){
            System.debug('ERROR:' + ex.getMessage());
            throw new AuraHandledException(ex.getMessage());
        }
    }

    /**
    * @description :Validates string whether it's dutch telephone or PostCode
    * @param String str
    */
    public static Boolean checkTelephone (String str)
    {
        return Pattern.compile('^((\\+|00(\\s|\\s?\\-\\s?)?)31(\\s|\\s?\\-\\s?)?(\\(0\\)[\\-\\s]?)?|0)[1-9]((\\s|\\s?\\-\\s?)?[0-9])((\\s|\\s?-\\s?)?[0-9])((\\s|\\s?-\\s?)?[0-9])\\s?[0-9]\\s?[0-9]\\s?[0-9]\\s?[0-9]\\s?[0-9]').matcher(str).matches();
    }
    public static Boolean checkPostCode (String str)
    {
        return Pattern.compile('\\d{4}[ ]?[A-Z]{2}').matcher(str).matches();
    }

    public class CompanySearchDto {
        public string name;
        public string domain;
        public string phone;
        public string street;
        public string city;
        public string postcode;
        public string province;
        public string country;
    }


}