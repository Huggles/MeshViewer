<!--
 - Created by jaapbranderhorst on 23/02/2020.
 -->

<!-- Credit Safe Search Form 2 -->
<template>
    <!-- show errors only if error message is filled -->

    <c-custom-toast class="error-message" message={errorMessage} title={errorTitle}></c-custom-toast>
    <!-- show country selection box in case this form is used standalone -->
    <template if:false={selectedCountry}>
        <lightning-combobox name="selectedCountry" class="slds-m-around_x-small" label={label.Search_Country} options={countries} value={selectedCountry} placeholder="Select a Country" dropdown-alignment="left" required variant="standard" onchange={handleSelectedCountryChange}></lightning-combobox>
    </template>
    <lightning-input name="name" class="slds-m-around_x-small" label={label.Name} type="text" value={name} minlength=2 message-when-too-short="Please enter at least two characters." variant="standard" onchange={handleOnChange}></lightning-input>
    <!-- Belgium specific -->
    <template if:true={isBeSelected}>
        <lightning-combobox name="status" class="slds-m-around_x-small" label={label.Status} options={statuses} value={status} placeholder="Select a Status" dropdown-alignment="left" variant="standard" onchange={handleStatusOnChange}></lightning-combobox>
        <lightning-input name="creditSafe_id" class="slds-m-around_x-small" label={label.Creditsafe_company_identifier} type="text" variant="standard" pattern="BE\d{8}" message-when-pattern-mismatch="Please enter a valid CreditSafe registration number." value={creditSafeId} onchange={handleOnChange}></lightning-input>
        <lightning-input name="registration_number" class="slds-m-around_x-small" label={label.Registration_Number} type="text" variant="standard" pattern="\d{9}" message-when-pattern-mismatch="Please enter a valid Belgian registration number consisting of 9 digits." value={registrationNumber} onchange={handleOnChange}></lightning-input>
        <lightning-input name="vat_number" class="slds-m-around_x-small" label={label.Search_VAT_Number} type="text" variant="standard" pattern="\d{9}" message-when-pattern-mismatch="Please enter a valid Belgian VAT Number starting with BE0 followed by 9 digits." value={vatNumber} onchange={handleOnChange}></lightning-input>
    </template>
    <!-- Sweden specific -->
    <template if:true={isSeSelected}>
        <lightning-combobox name="status" class="slds-m-around_x-small" label="Country" options={statuses} value={status} placeholder="Select a Status" dropdown-alignment="left" variant="standard" onchange={handleStatusOnChange}></lightning-combobox>
        <lightning-input name="creditSafe_id" class="slds-m-around_x-small" label={label.Creditsafe_company_identifier} type="text" variant="standard" pattern="^(SE)\d{3}/(0|1)/\d{10,12}$" message-when-pattern-mismatch="Please enter a valid Swedish CreditSafe Identification Number" value={creditSafeId} onchange={handleOnChange}></lightning-input>
        <lightning-input name="registration_number" class="slds-m-around_x-small" label={label.Registration_Number} type="text" variant="standard" pattern="\d{10,12}" message-when-pattern-mismatch="Please enter a valid registration number of 10 to 12 digits." value={registrationNumber} onchange={handleOnChange}></lightning-input>
        <lightning-input label={label.Search_VAT_Number} name="vat_number" class="slds-m-around_x-small" pattern="(SE)?[0-9]{12}" message-when-pattern-mismatch="Please enter a valid Swedish VAT Number starting with SE followed by 12 digits." value={vatNumber} onchange={handleOnChange}></lightning-input>
    </template>
    <!-- France specific -->
    <template if:true={isFrSelected}>
        <lightning-combobox name="status" class="slds-m-around_x-small" label={label.Status} options={statuses} value={status} placeholder="Select a Status" dropdown-alignment="left" variant="standard" onchange={handleStatusOnChange}></lightning-combobox>
        <lightning-input name="creditSafe_id" class="slds-m-around_x-small" label={label.Creditsafe_company_identifier} type="text" variant="standard" pattern="^(FR)\d{3}/(X)/(\d{9}|\d{14})$" message-when-pattern-mismatch="Please enter a valid CreditSafe registration id for France." value={creditSafeId} onchange={handleOnChange}></lightning-input>
        <lightning-input name="registration_number" class="slds-m-around_x-small" label={label.Registration_Number} type="text" variant="standard" pattern="(\d{9}|\d{14})" message-when-pattern-mismatch="Please enter a valid French registration number." value={registrationNumber} onchange={handleOnChange}></lightning-input>
        <lightning-input label={label.Search_VAT_Number} name="vat_number" class="slds-m-around_x-small" pattern="(FR)?[0-9A-Z]{2}[0-9]{9}" message-when-pattern-mismatch="Please enter a valid French VAT Number." value={vatNumber} onchange={handleOnChange}></lightning-input>
    </template>
    <!-- Ireland specific -->
    <template if:true={isIeSelected}>
        <lightning-combobox name="status" class="slds-m-around_x-small" label={label.Status} options={statuses} value={status} placeholder="Select a Status" dropdown-alignment="left" variant="standard" onchange={handleStatusOnChange}></lightning-combobox>
        <lightning-input name="creditSafe_id" class="slds-m-around_x-small" label={label.Creditsafe_company_identifier} type="text" variant="standard" pattern="^(IE)\d{3}/(0)/.+$" message-when-pattern-mismatch="Please enter a valid Irish CreditSafe Identification Number" value={creditSafeId} onchange={handleOnChange}></lightning-input>
        <lightning-input name="registration_number" class="slds-m-around_x-small" label={label.Registration_Number} type="text" variant="standard" minlength=2 message-when-too-short="Please enter a valid registration number of at least two characters." value={registrationNumber} onchange={handleOnChange}></lightning-input>
        <lightning-input label={label.Search_VAT_Number} name="vat_number" class="slds-m-around_x-small" pattern="(IE)?[0-9]S[0-9]{5}L" message-when-pattern-mismatch="Please enter a valid Irish VAT Number starting with IE." value={vatNumber} onchange={handleOnChange}></lightning-input>
    </template>
    <!-- UK specific -->
    <template if:true={isGbSelected}>
        <lightning-combobox name="status" class="slds-m-around_x-small" label={label.Status} options={statuses} value={status} placeholder="Select a Status" dropdown-alignment="left" variant="standard" onchange={handleStatusOnChange}></lightning-combobox>
        <lightning-input name="creditSafe_id" class="slds-m-around_x-small" label={label.Creditsafe_company_identifier} type="text" variant="standard" pattern="^(GB)\d{3}/(0|1)/.+$" message-when-pattern-mismatch="Not a valid CreditSafe Identification Number for country Great-Britain" value={id} onchange={handleOnChange}></lightning-input>
        <lightning-input name="registration_number" class="slds-m-around_x-small" label={label.Registration_Number} type="text" variant="standard" minlength=2 message-when-too-short="Please enter at least two characters to search on the registration number." value={registrationNumber} onchange={handleOnChange}></lightning-input>
        <lightning-input label={label.Search_VAT_Number} name="vat_number" class="slds-m-around_x-small" pattern="(GB)?([0-9]{9}([0-9]{3})?|[A-Z]{2}[0-9]{3})" message-when-pattern-mismatch="Please enter a valid VAT Number for the United Kingdom." value={vatNumber} onchange={handleOnChange}></lightning-input>
    </template>
    <!-- DE specific -->
    <template if:true={isDeSelected}>
        <lightning-combobox name="status" class="slds-m-around_x-small" label={label.Status} options={statuses} value={status} placeholder="Select a Status" dropdown-alignment="left" variant="standard" onchange={handleStatusOnChange}></lightning-combobox>
        <lightning-input name="creditSafe_id" class="slds-m-around_x-small" label={label.Creditsafe_company_identifier} type="text" variant="standard" pattern="^(DE)\d{3}/(0|1)/DE\d{8}$" message-when-pattern-mismatch="Please enter a valid CreditSafe registration id for Germany." value={creditSafeId} onchange={handleOnChange}></lightning-input>
        <lightning-input name="registration_number" class="slds-m-around_x-small" label={label.Registration_Number} type="text" variant="standard" pattern="^(?!^\s*HR\s*$)(?!^\s*HRB\s*$)(?!^\s*HRA\s*$)(?!^\s*GnR\s*$)(?!^\s*PR\s*$)(?!^\s*IN\s*$).*$" message-when-pattern-mismatch="Please enter a valid registration number." value={registrationNumber} onchange={handleOnChange}></lightning-input>
        <lightning-combobox name="registrationType" class="slds-m-around_x-small" label={label.Registration_Type} options={registrationTypes} value={registrationType} placeholder="Select a Registration Type" dropdown-alignment="left" variant="standard" onchange={handleRegistrationTypeOnChange}></lightning-combobox>
        <lightning-input name="vat_number" label={label.Search_VAT_Number} class="slds-m-around_x-small" pattern="(DE)?[0-9]{9}" message-when-pattern-mismatch="Please enter a valid German VAT Number starting with DE followed by 9 digits." value={vatNumber} onchange={handleOnChange}></lightning-input>
    </template>
    <!-- Address -->
    <lightning-layout>
        <lightning-layout-item size="8">
            <lightning-input name="street" class="slds-m-around_x-small" label={label.Search_Street} type="text" variant="standard" value={street} onchange={handleOnChange}></lightning-input>
        </lightning-layout-item>
        <lightning-layout-item size="4">
            <lightning-input name="postalCode" class="slds-m-around_x-small" label={label.Search_Postal_Code} type="text" value={postal_code} onchange={handleOnChange} variant="standard"></lightning-input>
        </lightning-layout-item>
    </lightning-layout>
    <lightning-layout>
        <!-- province field should only be shown for FR -->
        <template if:true={showProvince}>
            <lightning-layout-item size="6">
                <lightning-input name="province" class="slds-m-around_x-small" label={label.Province} type="text" variant="standard" value={province} onchange={handleOnChange}></lightning-input>
            </lightning-layout-item>
        </template>
        <lightning-layout-item size="6">
            <lightning-input name="city" class="slds-m-around_x-small" label={label.Search_City} type="text" variant="standard" value={city} onchange={handleOnChange}></lightning-input>
        </lightning-layout-item>
    </lightning-layout>
</template>