<!--
 - Created by jaapbranderhorst on 05/05/2020.
 -->

<!-- License Type Management Card -->
<template>
    <lightning-card title={title} variant="base">
        <template if:true={isInitializing}>
            <div style='height: 300px'>
                <lightning-spinner alternative-text={label.Loading}></lightning-spinner>
            </div>
        </template>
        <template if:false={isInitializing}>
            <template if:true={showAssignLicensesModal}>
                <c-assign-license-type-modal license-type-api-name={licenseTypeApiName} onusersassigned={handleUsersAssigned} onclose={handleCloseAssignLicensesModal}></c-assign-license-type-modal>
            </template>
            <div slot="actions">
                <template if:true={showAssignLicensesButton}>
                    <template if:true={sObjectUsers}>
                        <lightning-button class="slds-theme_neutral" variant="neutral" label={label.Remove_Assignments_Button} disabled={isNoRowSelected} onclick={handleRemoveAssignmentClicked}></lightning-button>
                    </template>
                    <lightning-button class="slds-theme_neutral" variant="neutral" label={label.Assign_Licenses} onclick={handleAssignLicensesClicked}></lightning-button>
                </template>
                <!-- TODO: add later          <lightning-button class="slds-theme_neutral" variant="neutral" label="Purchase Licenses"></lightning-button> -->
            </div>
            <div class="slds-card__body_inner">
                <div style="font-size: 0.8125rem;">
                    <p>{licensesAssignedLabel}</p>
                </div>
                <template if:true={sObjectUsers}>
                    <c-user-data-table
                            users={sObjectUsers}
                            max-number-of-users={assignedNorOfSeats}
                            is-loading={isLoading}
                            default-sort-direction={defaultSortDirection}
                            enable-infinite-loading={enableInfiniteLoading}
                            onsort={handleSort}
                            onrowselection={handleRowSelection}
                            onloadmore={handleLoadMore}>
                    </c-user-data-table>
                </template>
                <template if:false={sObjectUsers}>
                    <c-no-result-image no-data-label={label.No_users_assigned}></c-no-result-image>
                </template>
            </div>
        </template>
    </lightning-card>
</template>