<!--
 - Created by vishalshete on 10/08/2020.
 -->

<!-- Search Business Dossiers -->
<template>
    <header class="slds-modal__header">
        <h2 id="modal-heading-01" class="slds-modal__title slds-hyphenate">{label.Find_Businesses_Title}</h2>
    </header>

    <div>
        <template if:true={isInitializing}>
            <div style='height: 300px'>
                <lightning-spinner alternative-text={label.Loading}></lightning-spinner>
            </div>
        </template>
        <!--Show search fields-->
        <template if:false={isInitializing}>
            <div class="slds-grid slds-wrap slds-m-around_x-small">
                <div class=" slds-col slds-size_1-of-1 ">
                    {label.CurrentlyShowing} {businessDossierLength} {label.Records} of {maxRecords}
                </div>
                <div class=" slds-col slds-size_1-of-1 slds-m-top_x-small">
                    <lightning-input type="text" name = "cities" class= "slds-col slds-size_1-of-3" variant="label-hidden"
                                     placeholder={label.FastSearch}  onchange={handleSearchChange}></lightning-input>
                </div>
                <!--Show Datatable-->
                <div class="slds-col slds-size_1-of-1 slds-m-top_x-small slds-box_border" >
                    <div style="height: 60VH;">
                        <lightning-datatable
                                key-field='Id'
                                data={businessDossiers}
                                show-row-number-column
                                columns={columns}
                                onrowselection={handleRowSelection}
                                is-loading={showDatatableSpinner}
                                enable-infinite-loading={enableInfiniteLoading}
                                onloadmore={handleLoadMore}
                                load-more-offset="20">
                        </lightning-datatable>
                    </div>
                </div>
            </div>
        </template>
        <!--show no data image-->
        <template if:false={businessDossiers}>
            <c-no-result-image
                    no-data-label="No Data Found">
            </c-no-result-image>
        </template>
        <c-flow-footer next-button-title={label.CreateBusinessDossiers}
                       cancel-button-title={label.Cancel}
                       previous-button-title={label.SearchReset}
                       available-actions={availableFooterActions}
                       show-cancel-button={showFooterCancelButton}
                       onnextclick={handleFooterNextClick}>
        </c-flow-footer>
    </div>
</template>